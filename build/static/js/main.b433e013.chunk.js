(this.webpackJsonpbackbone=this.webpackJsonpbackbone||[]).push([[0],{44:function(e,t,a){e.exports=a(77)},49:function(e,t,a){},70:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(22),c=a.n(r),o=(a(49),a(9)),m=a(17),u=a(6),i=a(10),s=a.n(i),E=(a(67),a(68),a(69),a(70),a(7)),d=function(e){return{type:"USER_UPDATE_AUTH",value:e}},g=function(e){return{type:"USER_UPDATE_NAME",value:e}},b=function(e){return{type:"USER_UPDATE_ROLE",value:e}},h=a(78),p=a(43),f="";var v=function(){var e=window.location.hostname,t=window.location.protocol;f="localhost"===e?t+"//"+e+":8080":t+"//"+e},O=a(8);var y=function(){var e=Object(u.f)(),t=Object(E.c)((function(e){return e.user})),a=Object(E.b)(),r=Object(n.useState)({name:"",show:!1}),c=Object(o.a)(r,2),m=c[0],i=c[1];return Object(n.useEffect)((function(){v()}),[]),Object(n.useEffect)((function(){console.log(t),t.auth?"superAdmin"==t.role?i({name:"High-View Studios",show:!0}):i({name:t.name,show:!0}):i({name:"",show:!1})}),[t]),l.a.createElement("div",null,m.show?l.a.createElement("div",null,l.a.createElement("strong",null,"User: ",m.name),l.a.createElement("br",null),l.a.createElement(O.a,{variant:"warning",onClick:function(){s.a.get("/logout").then((function(t){console.log(t.data.message),"User logged out"===t.data.message&&(a(d(!1)),a(g("")),a(b("")),e.push("/signin"))})).catch((function(e){console.log(e)}))}},"Log Out")):l.a.createElement("div",null))};var j=function(){return l.a.createElement("nav",null,l.a.createElement(h.a,null,l.a.createElement(p.a,null),l.a.createElement(p.a,null,l.a.createElement("h1",null,l.a.createElement("strong",null,"My STAFF")),l.a.createElement("h2",null,l.a.createElement("strong",null,"Space, Times, Flexible, Facilities"))),l.a.createElement(p.a,null,l.a.createElement("div",{className:"user-nav"},l.a.createElement(y,null)))))},w=a(14),N=a(15);var S=function(){var e=Object(E.c)((function(e){return e.user})),t=Object(u.f)(),a=Object(E.b)(),r=Object(n.useState)(""),c=Object(o.a)(r,2),m=c[0],i=c[1];return Object(n.useEffect)((function(){document.title="STAFF - Sign In",v(),e.auth&&t.push("/")}),[]),l.a.createElement("div",{className:"body"},l.a.createElement(w.a,{className:"p-3"},l.a.createElement(N.a,{className:"back-color"},l.a.createElement("h3",null,"Please Sign In!"),l.a.createElement("form",null,l.a.createElement("label",{id:"lblEmail"},"Email:"),l.a.createElement("br",null),l.a.createElement("input",{id:"txtEmail",type:"email"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("label",{id:"lblPassword"},"Password:"),l.a.createElement("br",null),l.a.createElement("input",{id:"txtPassword",type:"password"}),l.a.createElement("p",null,m)),l.a.createElement("br",null),l.a.createElement(O.a,{variant:"warning",onClick:function(e){e.preventDefault();var n=document.getElementById("txtEmail").value,l=document.getElementById("txtPassword").value;s.a.get("/login?email="+n+"&password="+l).then((function(e){"Logged in successful"===e.data.message?(console.log(e.data),a(d(!0)),a(g(e.data.displayName)),a(b(e.data.role)),t.push("/")):i(e.data.info)})).catch((function(e){console.log(e)}))}},"Log in"),l.a.createElement(O.a,{variant:"warning",onClick:function(){t.push("/register")}},"Register"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(O.a,{variant:"danger",href:f+"/auth/google"},l.a.createElement("i",{className:"fab fa-google"})," Log in with Google"))))};var A=function(){var e=Object(E.c)((function(e){return e.user})),t=Object(u.f)(),a=Object(E.b)();return Object(n.useEffect)((function(){document.title="STAFF",0==e.auth?t.push("/signin"):"superAdmin"==e.role&&t.push("/administrator")}),[]),l.a.createElement("div",{className:"body"},l.a.createElement(w.a,{fluid:!0,className:"p-3"},l.a.createElement(N.a,{className:"back-color"},l.a.createElement("h1",null,"Home"),l.a.createElement(O.a,{variant:"warning",onClick:function(){a(g())}},"Test"),l.a.createElement(O.a,{variant:"warning",onClick:function(){return t.push("/administrator/home")}},"Home"))))},k=a(5);var x=function(){var e=Object(u.f)(),t=Object(E.c)((function(e){return e.user})),a=Object(n.useState)(""),r=Object(o.a)(a,2),c=r[0],m=r[1],i=Object(n.useState)(!1),d=Object(o.a)(i,2),g=d[0],b=d[1];return Object(n.useEffect)((function(){document.title="Register",t.auth&&e.push("/")}),[]),l.a.createElement("div",{className:"body"},l.a.createElement(w.a,{className:"p-3"},l.a.createElement(N.a,{className:"back-color"},l.a.createElement("div",{className:"header"},l.a.createElement("h1",null,"Register"),g?l.a.createElement("div",null,l.a.createElement("h2",null," You have successfully been registered"),l.a.createElement("br",null),l.a.createElement("p",null,"Please log in"),l.a.createElement(O.a,{type:"submit",onClick:function(){b(!1),e.push("/signin")},variant:"primary"},"Login")):l.a.createElement(k.a,{action:"/form",method:"POST"},l.a.createElement(k.a.Control,{id:"name",size:"sm",type:"text",placeholder:"Name",required:!0}),l.a.createElement("br",null),l.a.createElement(k.a.Control,{id:"email",size:"sm",type:"email",placeholder:"Email",required:!0}),l.a.createElement("br",null),l.a.createElement(k.a.Control,{id:"password",size:"sm",type:"password",placeholder:"Password",required:!0}),l.a.createElement("br",null),l.a.createElement(k.a.Control,{id:"confirmpassword",size:"sm",type:"password",placeholder:"Confirm Password",required:!0}),l.a.createElement("br",null),l.a.createElement("p",null,c),l.a.createElement(O.a,{type:"submit",onClick:function(e){e.preventDefault(),m("");var t="/register/"+document.getElementById("name").value+"/"+document.getElementById("email").value+"/"+document.getElementById("password").value+"/"+document.getElementById("confirmpassword").value;s.a.get(t).then((function(e){"User registered successfully"===e.data.message?b(!0):"Yes"===e.data.userError&&m(e.data.message)})).catch((function(e){console.log(e)}))},variant:"primary"},"Register"))))))};var R=function(){return Object(n.useEffect)((function(){document.title="TEST"}),[]),l.a.createElement("div",{className:"body"},l.a.createElement(w.a,{className:"p-3"},l.a.createElement(N.a,{className:"back-color"},l.a.createElement("h1",null,"TEST"))))};var T=function(){var e=Object(u.f)(),t=Object(E.c)((function(e){return e.user})),a=Object(n.useState)(""),r=Object(o.a)(a,2);return r[0],r[1],t.auth&&"superAdmin"==t.role||e.push("/administrator/signin"),l.a.createElement("div",null,l.a.createElement(w.a,{className:"p-3"},l.a.createElement(N.a,{className:"back-color"},l.a.createElement("h1",null,"Organisation Register"),l.a.createElement("h2",null,"Done!"))))};var I=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(E.c)((function(e){return e.user})),m=Object(u.f)();return Object(n.useEffect)((function(){v(),c.auth&&("superAdmin"==c.role?m.push("/"):r(!1))}),[]),l.a.createElement("div",null,l.a.createElement("h1",null,"Administrator Sign In"),a?l.a.createElement("a",{href:f+"/auth/github"},"Sign In With GitHub"):l.a.createElement("div",null,l.a.createElement("h1",null,"Access Denied")))};var _=function(){var e=Object(u.f)(),t=Object(E.c)((function(e){return e.user})),a=Object(n.useState)(""),r=Object(o.a)(a,2),c=r[0],m=r[1];return t.auth&&"superAdmin"==t.role||e.push("/administrator/signin"),l.a.createElement("div",null,l.a.createElement(w.a,{className:"p-3"},l.a.createElement(N.a,{className:"back-color"},l.a.createElement("h1",null,"Organisation Register"),l.a.createElement(k.a,{className:"A-AddOrganisationText",name:"form"},l.a.createElement(k.a.Row,null,l.a.createElement(k.a.Group,{as:p.a},l.a.createElement(k.a.Label,{id:"lblOrgName"},"Organisation Name:"),l.a.createElement("br",null),l.a.createElement(k.a.Control,{id:"txtOrgName",type:"text",required:!0})),l.a.createElement(k.a.Group,{as:p.a},l.a.createElement(k.a.Label,{id:"lblAlRooms"},"Allocated Rooms:"),l.a.createElement("br",null),l.a.createElement(k.a.Control,{id:"txtAlRooms",type:"text",required:!0}))),l.a.createElement(k.a.Label,{id:"lblAuthTypes"},"Types of Authencation:"),l.a.createElement("br",null),l.a.createElement(k.a.Row,null,l.a.createElement(k.a.Group,{as:p.a},l.a.createElement(k.a.Check,{id:"ckbLocal",type:"checkbox",label:"Local Login"})),l.a.createElement(k.a.Group,{as:p.a},l.a.createElement(k.a.Check,{id:"ckbGoggle",type:"checkbox",label:"Google Login"}))),l.a.createElement(k.a.Label,{className:"A-AddOrganisationTextColor",id:"lblPOC"},"Point of Contact (Senior Admin):"),l.a.createElement("br",null),l.a.createElement(k.a.Row,null,l.a.createElement(k.a.Group,{as:p.a},l.a.createElement(k.a.Label,{id:"lblName"},"Name:"),l.a.createElement("br",null),l.a.createElement(k.a.Control,{id:"txtName",type:"text",required:!0})),l.a.createElement(k.a.Group,{as:p.a},l.a.createElement(k.a.Label,{id:"lblEmail"},"Email:"),l.a.createElement("br",null),l.a.createElement(k.a.Control,{id:"txtEmail",type:"text",required:!0}))),l.a.createElement("p",null,c),l.a.createElement(O.a,{type:"submit",onClick:function(t){t.preventDefault();var a="/administrator/addOrganisation/"+document.getElementById("txtOrgName").value+"/"+document.getElementById("txtAlRooms").value+"/"+document.getElementById("ckbLocal").checked+"/"+document.getElementById("ckbGoggle").checked+"/"+document.getElementById("txtName").value+"/"+document.getElementById("txtEmail").value;s.a.get(a).then((function(t){var a=t.data;console.log(t.data),"null"!=a.error?console.log(a.message):"Yes"==a.userError?m(a.message):"Successfully added"==a.message&&e.push("/administrator/done")})).catch((function(e){console.log(e)}))},variant:"warning"},"Register"),l.a.createElement(O.a,{type:"submit",onClick:function(t){t.preventDefault();var a=document.getElementById("txtOrgName").value,n=document.getElementById("txtAlRooms").value,l=document.getElementById("ckbLocal").checked,r=document.getElementById("ckbGoggle").checked,c=document.getElementById("txtName").value,o=document.getElementById("txtEmail").value,u={orgName:a,orgRooms:n,authLocal:l.toString(),authGoogle:r.toString(),pName:c,pEmail:o};s.a.post("/registerPost",u).then((function(t){var a=t.data;console.log(t.data),"null"!=a.error?console.log(a.message):"Yes"==a.userError?m(a.message):"Successfully added"==a.message&&e.push("/administrator/done")})).catch((function(e){console.log(e)}))},variant:"warning"},"Register New")))))};var C=function(){var e=Object(E.b)(),t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){s.a.get("/auth",{withCredentials:!0}).then((function(t){console.log(t.data);var a=t.data.auth;e(d(a)),a&&("superAdmin"==t.data.role?e(g("High-ViewStudios")):e(g(t.data.user.displayName)),e(b(t.data.role))),c(!0)})).catch((function(e){console.log("Auth "+e)}))}),[]),l.a.createElement("div",null,r?l.a.createElement(m.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(j,null),l.a.createElement(u.c,null,l.a.createElement(u.a,{path:"/",exact:!0,component:A}),l.a.createElement(u.a,{path:"/signin",component:S}),l.a.createElement(u.a,{path:"/register",component:x}),l.a.createElement(u.a,{path:"/usertest",component:R}),l.a.createElement(u.a,{path:"/administrator",exact:!0,component:_}),l.a.createElement(u.a,{path:"/administrator/signin",component:I}),l.a.createElement(u.a,{path:"/administrator/done",component:T})))):l.a.createElement("div",null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=a(20),U=a(19),B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{auth:!1,name:"",email:"",role:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_UPDATE_AUTH":return Object(U.a)(Object(U.a)({},e),{},{auth:t.value});case"USER_UPDATE_NAME":return Object(U.a)(Object(U.a)({},e),{},{name:t.value});case"USER_UPDATE_EMAIL":return Object(U.a)(Object(U.a)({},e),{},{email:t.value});case"USER_UPDATE_ROLE":return Object(U.a)(Object(U.a)({},e),{},{role:t.value});default:return e}},P=Object(L.b)({user:B}),D=Object(L.c)(P,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());c.a.render(l.a.createElement(E.a,{store:D},l.a.createElement(l.a.StrictMode,null,l.a.createElement(C,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.b433e013.chunk.js.map